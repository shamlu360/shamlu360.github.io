<!DOCTYPE html>
<html>
<head>
    <title>Whisky for New Drinkers!!!</title>
    <meta charset="utf-8" />
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <style type="text/css">
      body {
		   transform: scale(0.8);
		   transform-origin: 0 0;
       margin-left: 150px;
		  }
		  button{
		  cursor: pointer;
		  }
		table{
			border-collapse: collapse;
		}
		th{
			background: #333;
			color: white;
			font-weight: bold;
			cursor: s-resize;
		}
		td,th{
			padding: 10px;
			border: 1px solid #ccc;
			text-align: left;
		}
		#detail{
		margin:0;
		}
		img{
			image-orientation:from-image;
		}
		div.intro_pic{
			transform: rotate(90deg);
		}

		.country{font-size:14px; cursor: pointer;}

		div.sugg{
		height: 800px;
		width: 1000px;
		overflow: scroll;
		}

		input {
			height: 30px;
			width: 800px;
				
			writing-mode: bt-lr;
			}
		#char_base{
			display: flex;
		}
		#summary{
		    text-align: left;
		}
    #detail{
      font-size:13px;
      font-family: "Comic Sans MS", cursive, sans-serif;
    }
    .bar:hover{
      fill: OrangeRed;
    }
    </style>
</head>

<body style="background-color:Cornsilk;">
  <center>
  <h1> Welcome to our page to learn about whisky!</h1>
  <div class="intro_pic">
    <br><br><br><br><br>
    <img src="whisky_intro.jpg" style="width:30%; height: 30%" class="rotate180">
  </div>
  </center>
  <h2> What is whisky? Is it "Whisky"? Or "Whiskey?"</h2>
  <p> Whisky originates from Gaels (Which are the ancestors of Irish and Scottish) and means “Life of Water”. It is a type of spirit with more than 40% alcohol by volume. Traditional whisky from Scotland and Ireland distilled from malted barley or grain, while American style whisky, Bourbon, makes primarily from corn. As the art of whisky spread around the world, there are more people outside of Scotland and Ireland started to make whisky. "Whisky" is Scotish spelling, while "Whiskey" is Irish spelling. Although you may see many bottles from Scotland and other countries printed "Whisky", both spelling are refering to the same beverage in modern use.</p>

  <h2>Why drink whisky?</h2>
  <p>One may ask what makes whisky different other spirit? What makes whisky different with other spirit? Flavor! For example: Scotch whisky requires the spirit to make with 100% malted barley and to mature in oak at least for three years. The unique flavor of each whisky, we called it character, developed in the oak barrel that makes everybody’s favorite whisky.</p>
  <p>For example, “peaty” is a unique character to Scotch whisky, it describes the smoky aroma in whisky, sometimes you may receive the flavor as charcoal aroma. Some of the Scotch whisky from Islay in Scotland, such as Ardbeg, Bowmore, and Laphroaig, are famous peaty whisky.</p>

  <h2>Don't know how to pick a bottle? No Problem!</h2>
  <p>In recent years, more people started to drink whisky that drinking whisky becomes middle class trend. However many new whisky drinkers are confused which bottle of whisky to buy when they ran into BevMo or Total Wine whisky shelf. In here, we would like to educate readers to choose whisky based on the review score, flavor character, country of origin, and price range.</p><br>

  <p>We are glad that you are visiting our website, so that we can teach you a easier way to pick a bottle.</p>
  <br><br>
  <hr>
  <h2>How does this website help?</h2>
  <p>We aim to help new whisky drinkers like you! We will first introduce the countries that produce whisky and interesting facts from them. Then, we will go over the main characters of whisky. And finally, we can recommend a list of whiskies(whiskeys)

  <h2>First, learn the countries that make whisky(Or Whiskey)</h2>
  <p> Let's begin learn about the countries that make whisky(whiskey).</p><br>
  

  <center><h1>Lesson 1: The World of Whisky, Whiskey, and Bourbon</h1></center>

  <h2>How does whisky from different countries differ?</h2>
  <p>The character of different bottles of whisky(whiskey) differ with the origin of ingredients and method. Think of your favourite fruit, strawberry, which tastes different if it is grow in California or in Japan. Same as the ingredients of whisky(whiskey): the malt, water, or even rye or corn (depends what kind of whisky) have different taste that builds the unique character in the bottle, along with different methods and legal requirements that makes every bottle of whisky(whiskey) taste different!</p>

  <center>
  <br>
  <p>Below is the map of whisky, the countries filled in green represent whisky producing countries.</p><br>
  <p>Point at the country to see the interesting fact of whisky!</p>
  </center>

  <center>
  <div id="map"></div>
  <div id="country_name">
      <p>
        The Countries that Make Whisky(Whiskey)
      </p>
      <button class="country" id="sco" type="button">Scotland(United Kingdom)</button>
      <button class="country" id="wal" type="button">Wales (United Kingdom)</button>
      <button class="country" id="usa" type="button">United States</button>
      <button class="country" id="net" type="button">Netherlands</button>
      <button class="country" id="sou" type="button">South Africa</button>
      <br>
      <button class="country" id="eng" type="button">England (United Kingdom)</button>
      <button class="country" id="fra" type="button">France</button>
      <button class="country" id="aus" type="button">Australia</button>
      <button class="country" id="swi" type="button">Switzerland</button>
      <button class="country" id="ire" type="button">Ireland</button>
      <br>
      <button class="country" id="can" type="button">Canada</button>
      <button class="country" id="bel" type="button">Belgium</button>
      <button class="country" id="fin" type="button">Finland</button>
      <button class="country" id="tai" type="button">Taiwan</button>
      <button class="country" id="swe" type="button">Sweden</button>
      <button class="country" id="ind" type="button">India</button>
      <p> Alternatively, you may click on the country to see the whisky fact of that country!</p>
    </div>
  </center>
  <center>
    <div id="summary" style="width: 1000px;height: 400px;background-color: Lavender;"> 
    </div>
    <center>
    <br><br>
    <hr>
    <h1>Lesson 2: The Soul</h1>
    <p>The unique flavor in each bottle of whisky(whiskey) is called "character". We grouped all characters into 9 characters. </p>
    <br>
   </div> 
    <br>
    <div id="characters" style="width:1400px;height:900px">
    <table>
      <tr>
        <th>Characters</th>
        <th>Descriptions</th>
        <th>Examples</th>
      </tr>
      <tr>
        <td>Fruity</td>
        <td>Fruity describes when whisky(whiskey) has fruity notes, such as apple and tropical fruit flavors. Longer fermentation times usually yields to more fruity characteristics.</td>
        <td><b>Scotland</b>: Glenfiddich 12 year. 
          <br>Expect: Apple and pear with creamy texture.</td>
      </tr>
      <tr>
        <td>Honey</td>
        <td>Honey describes when whisky(whiskey) has honey note. Interestingly, most of the whiskies(whiskeys) is also malty if it has honey note. </td>
        <td><b>Ireland</b>: Kibeggan Traditional Irish Whiskey. 
          <br>Expect: An elegant, sweet, and malty blend.</td>
      </tr>
      <tr>
        <td>Spicy</td>
        <td>You may expect 5 types of spicy note:
          <br>1- Spicies like salt, nutmeg or ginger
          <br>2- Hot or peppery notes like chili or black pepper
          <br>3- warming spices like cinnamon, clove, saffron
          <br>4- Salty note
          <br>5 - Mint or menthol notes</td>
        <td><b>Scotland</b>: Talisker 10 year.
          <br>Expect: Salty, pepper, smoky.</td>
      </tr>
      <tr>
        <td>Floral</td>
        <td>You may expect a light note of your favourite flower in your glass of whisky(whiskey)!</td>
        <td><b>Japan</b>: Suntory Hakushu Distiller's Reserve
          <br>Expect: Floral, gently smoky, and fruity flavour.</td>
      </tr>
      <tr>
        <td>Malty</td>
        <td>Malty describes the note of malted barley</td>
        <td><b>Japan</b>: Yamazaki Mizunara
          <br>Expect: Malty, fruity, spciy</td>
      </tr>
      <tr>
        <td>Nutty</td>
        <td>You may expect the flavor from nuts. Nutty notes usually come from sherry cask maturation.</td>
        <td><b>Scotland</b>: Springbank 11 year Local Bottling Note
          <br>Expect: Nutty like almonds, hazelnuts, and walmuts, rich and buttery finish</td>
      </tr>
      <tr>
        <td>Winey</td>
        <td>Winey does not necessary mean the flavor influenced from graph juice or wine, but the reminiscent of wine, perhaps developed from maturation because the mask was previously filled with wine.</td>
        <td><b>Scotland</b>: Glenmorangie Nectar d'Or
          <br>Expect: Almon, honey, vanilla, ginger, and clove spice. And some flavor of lemongrass from Sauvignon Blanc.</td>
      </tr>
      <tr>
        <td>Smoky</td>
        <td>Because single-malt whisky is made from malted barley, which is heated to dry out and to stop the germination process. The fuel(Mostly peat) is burned to infuse the smoky flavor into the grain, and thus develop the smoky flavor into whisky.</td>
        <td><b>Taiwan</b>: Kavalan Distillery Reserve Peaty Cask
          <br>Expect: Some honey and floral note with peat aroma, also along with tropical fruits like kiwi, guava, coconut and melon.
        </td>
      </tr>
      <tr>
        <td>Very Smoky</td>
        <td>The peat used by some distilleries is significantly more smokier than others. For example, Islay in Scotland is very famous for very smoky(as well as very peaty) whisky.</td>
        <td><b>Scotland</b>: Laphroaig 10 year
          <br>Expect: Very smoky and peaty, some salt, iodine, seaweed, and pear
        </td>
      </tr>
    </table>
    </div>
    <br><br>
    <hr>
    <h1> Lesson 3: The Algorithm</h1></center>
    <div id="flowchart">
    <img src="choice_algorithm.JPG" style="width:50%; height: 50%">
    <p>Step 1: Choose your favourite country<br>
       Step 2: Choose your desired character<br>
       Step 3: Choose a price range<br>
       Step 4: Pick a bottle from the list<br>
       (If you still confused from the list, you may pick the bottle with the highest score)
    </p>
    </div>
    <br><br>
    <hr>
    <center>
    <h1>Graduation Prize: Your Data Scientist</h1></center>
    <h2> Our database </h2>
    <p> Before suggesting whiskies(whiskeys), let me introduce our databse.</p>
    <br><br>
    <p> Here is the average score of each country.</p>
  	<div id="barchart"></div>
    <br><br>
    <p>Click count to see how many whiskies(whiskeys) our database has from each country!</p>
    <br>
    <div id="type_dropdown" style="height:50px;"></div>
    <p>You may point at the bubble to see the numbers of whiskies/whiskeys of the country</p>
    <svg id="bubble" width="700" height="800" font-family="sans-serif" font-size="10" text-anchor="middle" style="display:none"></svg>
    <hr>
    <h2> A bottle of whisky for you?</h2>
    <p> To find a bottle of whisky for you. First, select the country from the drop down list. Second, select a desired character. Then, we will generate a list of whisky of our suggestion.</p></center>
    <br>
    <br>
    <center>
    	<p>Step 1: Select a country</p>
    	<div id="dropdown" style="height:50px;"></div>
    	<p>Step 2: Select a character</p>
      <p>You may click on "Surprise!" for the unrated whiskies/whiskeys</p>
    	<div id="character_buttons">
    		<button class="flavor" id="Fruity" type="button">Fruity</button>
    		<button class="flavor" id="Honey" type="button">Honey</button>
    		<button class="flavor" id="Spicy" type="button">Spicy</button>
    		<button class="flavor" id="Floral" type="button">Floral</button>
    		<button class="flavor" id="Malty" type="button">Malty</button>
    		<button class="flavor" id="Nutty" type="button">Nutty</button>
    		<button class="flavor" id="Winey" type="button">Winey</button>
    		<button class="flavor" id="Smoky" type="button">Smoky</button>
    		<button class="flavor" id="Very Smoky" type="button">Very Smoky</button>
    		<button class="flavor" id="N" type="button">Surprise!</button>
        

    	</div>
    	<br>
    	<div id="rye_contain" style="display:none">
    		<p>For selecting Rye Whisky</p>
    		<button class="rye" id="R0" type="button">No Rye</button>
    		<button class="rye" id="R1" type="button">Low Rye</button>
    		<button class="rye" id="R2" type="button">Standard Rye</button>
    		<button class="rye" id="R3" type="button">High Rye</button>
    		<button class="rye" id="R4" type="button">Straight Rye</button>
    	</div>
    	<br><br>
    	<div id="money" style="display:none">
    		<p>Select a budget</p>
    		<button class="bud" id="all" type="button">Any</button>
    		<button class="bud" id="1" type="button">Less than $25</button>
    		<button class="bud" id="2" type="button">$26-40</button>
    		<button class="bud" id="3" type="button">$41-55</button>
    		<button class="bud" id="4" type="button">$56-90</button>
    		<button class="bud" id="5" type="button">$91-200</button>
    		<button class="bud" id="6" type="button">$200 or above</button>
    	</div>
    	<br><br>
    	<div class ="sugg" id="suggestion" style="display:none"><p>Please select</p></div>
    	<br><br><br><br>
    	<hr>
    	<br>
    	<p>At the end, thank you for coming and enjoy your glass of whisky(whiskey)!</p>
  	</center>
  <script type="text/javascript">
  	// To set a queue to load files, then call doTasks
    d3.queue()
      .defer(d3.json, "worldmap.json")
      .defer(d3.json, "whiskymap.json")
      .defer(d3.tsv,"whisky_fact.tsv")
      .defer(d3.csv, "whisky_clear.csv")
      .defer(d3.csv, "bourbon-data.csv")
      .defer(d3.csv, "single-data.csv")
      .defer(d3.csv, "rye-data.csv")
      .defer(d3.csv, "scotch-data.csv")
      .await(doTasks);

    // doTasks is the scripts to visualize the data
    function doTasks(error, worldmap, whisky_map, whisky_fact, whisky_data,
     bourbon_data, single_data, rye_data, scotch_data){
    	if (error) throw error;
      	// Catch error
      	document.body.style.zoom="90%";
    	/*
    	------------------------------------------------------------------
    	---------------------Next Chunk Below-----------------------------
    	------------------------------------------------------------------
    	*/
      	// data for country summary set up
        whisky_fact.forEach(function(d){
          d.Country = d.Country;
          d.Fact = d.Fact;
        })


      	// data database set up
        whisky_data.forEach(function(d){
            d.whisky = d.whisky;
            d.score = +d.score;
            d.cost = +d.cost;
            d.class = d.class;
            d.cluster = d.cluster;
            d.country = d.country;
            d.type = d.type;
        });

        

        /*
    	------------------------------------------------------------------
    	---------------------Next Chunk Below-----------------------------
    	------------------------------------------------------------------
        */

        /*
          Below is the code to make interactive map. The interactive map first draw the base map of the world map with gray, then add a layer of whisky-producing countries, coloured in teal. When user mouseover the whisky-producing countries, the fact of that country will be display on div#summary. Likewise, if user click one of the button on div#country_name, the fact of that country will be display on div#summary.
        */

      	// Below is the code for the map and interaction
      	var w = 1000,
            h = 400;

        // Margin
        var margin = {top:5, right:5, bottom:100, left:100};

        // Select svg for the interactive map
        var map = d3.select("#map")
                    .append("svg")
                    .attr("width",w)
                    .attr("height",h)
                    .append("g")
                    .attr('transform', 'translate(0,0)');

        var g = map.append("g");

        // Choose this projection of world map
        var path = d3.geoPath().projection(d3.geoEquirectangular());

        var summ = d3.select("#summary");


        // Draw the base map with gray
        g.selectAll("#basemap")
          .data(worldmap.features)
          .enter()
          .append("path")
          .attr("id","basemap")
          .attr("d",path)
          .style("fill","gray");
          
        // Draw the map with teal for whisky-producing countries
        g.selectAll(".whisky")
          .append("g")
           .data(whisky_map.features)
           .enter()
           .append("path")
           .attr("d",path)
           .attr("class","whisky")
           .attr("id", function(d){
              var country = d.properties.sovereignt;
              var id;
              if (country == "United Kingdom")
                id = "uk";
              else if (country == "United States of America")
                id = "usa";
              else
                id = country.substring(0,3).toLowerCase(); 
                // Set countries id with the first 3 letters
              return id;
              // Manually reset the id for uk and usa because both countries started with "uni"
           })
           .style("fill","teal");


        var country = d3.selectAll("path");

        var mouseoverCountry;

        // Interaction when mouseover on whisky-producing countries
        country.on("mouseover", function(map){
          mouseoverCountry = d3.select(this).attr("id");

          var id_country;

          if (mouseoverCountry == "United Kingdom")
            id_country = "uk";
          else if (mouseoverCountry == "United States of America")
            id_country = "usa";
          else
           id_country = mouseoverCountry.substring(0,3).toLowerCase();
          
          // Change the country colour to red if mouseover
          d3.selectAll("path#"+id_country)
            .transition().style("fill","red");

          var country_summ = whisky_fact.filter(function(d){
            var choice;
            if(mouseoverCountry == "uk")
              return (d.Country == "sco" ||
                      d.Country == "uk" ||
                      d.Country == "eng" ||
                      d.Country == "wal"
                      );
            else
              choice = mouseoverCountry;

            return d.Country == choice;
          }); // Obtain the country facts on selected whisky-producing countries

          summ.selectAll("#detail")
             .data(country_summ)
             .enter()
             .append("p")
             .attr("x",0)
             .attr("id","detail")
             .text(function(d){return d.Fact;});
          // Display the country facts on div#summary
               
        });

        country.on("mouseout", function(map){
          d3.select("#tooltip").remove();
          d3.select("#summary").selectAll("p")
            .remove();
          d3.selectAll(".whisky")
            .style("fill","teal");
        }) // Return to the original state for map and summary when mouseout

        // Below are for users to click on country_name buttons
        var table_country = d3.select("#country_name")
                              .selectAll(".country");

        // Interactions after it is clicked
        table_country.on("click",function(){

            var id_country = d3.select(this)
                               .attr("id");

            // Return to the original state for map and summary before doing anything
            d3.selectAll(".whisky").transition().style("fill","teal");

            var country_summ = whisky_fact.filter(function(d){
              return d.Country == id_country;
            });

            if(id_country == "sco" || id_country == "eng" || id_country == "wal")
              id_country = "uk";

            // Fill the selected country to red
            d3.selectAll("path#"+id_country)
            .transition().style("fill","red");

            // Clean the texts on summary
            summ.selectAll("#detail").remove();

            summ.selectAll("#detail")
             .data(country_summ)
             .enter()
             .append("p")
             .attr("x",0)
             .attr("id","detail")
             .text(function(d){return d.Fact;});
            // Display the country facts on div#summary
        })

        // Above is the code for the map and interaction


        /*
    	------------------------------------------------------------------
    	---------------------Next Chunk Below-----------------------------
    	------------------------------------------------------------------
        */


    	// Below is the code for bar chart

      	margin = {top: 20, right: 20, bottom: 110, left: 40};
      	var width = 700 - margin.left - margin.right,
    		height = 500 - margin.top - margin.bottom;

   		var barChart = d3.select("#barchart")
						 .append("svg")
						 .attr("width", width + margin.left + margin.right)
						 .attr("height", height + margin.top + margin.bottom)
						 .append("g")
						.attr("transform", "translate(" + margin.left+"," + margin.top + ")");

		// unique country with all score				
		var barData = d3.nest()
					  .key(function(d){
							return d.country;
					  })
					  .rollup(function (v) {return v.map(function(d){return d.score;})})
					  .entries(whisky_data);

		//# number of vintage in each country
		var countByCountry = d3.nest()
      						   .key(function(d) { return d.country ; })
      						   .rollup(function(d) { return d.length; })
      						   .entries(whisky_data);

      	//average array
      	var ave = [];
      	for(var i = 0; i < barData.length; i++){
      		ave[i] = d3.sum(barData[i].value)/countByCountry[i].value;
      	}
      	
      	var allArr = [];

      	for(var i = 0; i < barData.length; i++){
      		var user = new Object();
     			user = {country: countByCountry[i].key,
      					average: ave[i]};
      			allArr.push(user);
      	}

      	var xscale = d3.scaleBand()
					   .domain(allArr.map(function(d) {
							return d.country; 
						}))
					   .rangeRound([0,width])
					   .paddingInner(0.2);


		var yscale = d3.scaleLinear()
					   .domain([0, d3.max(allArr, function(d){
							return d.average;
						})])
					   .range([height,0]);
		// Add the x Axis
		barChart.append("g")
      			.attr("transform", "translate(0," + height + ")")
      			.call(d3.axisBottom(xscale))
		 		.selectAll("text")	
     			.style("text-anchor", "end")
       			.attr("dx", ".8em")
  				.style("font-size", "15px") 
        		.attr("dy", ".75em")
       			.attr("transform",  "rotate(-35)");
  		// add the y Axis
  		barChart.append("g")
      			.call(d3.axisLeft(yscale));
      	// Plot the bars
      	barChart.selectAll(".bar")
      			.data(allArr)
    			.enter().append("rect")
      			.attr("class", "bar")
      			.attr("x", function(d) {return xscale(d.country); })
      			.attr("width", xscale.bandwidth())
   				.attr("y", function(d) { return yscale(d.average); })
   				.attr("height", function(d) { return height - yscale(d.average); })
      			.attr("fill", "steelBlue");

      	var worldSum= d3.sum(allArr, function(d) { return d.average;}); 

      	var worldAverage = worldSum/(allArr.length);
      	// Add the average line
      	var line = barChart.append("line")
      					   .attr("x1", 0 )
      					   .attr("x2",2000)
      					   .attr("y1",yscale(worldAverage) )
      					   .attr("y2", yscale(worldAverage))
      					   .attr("stroke-width", 1)
      					   .attr("stroke", "red");
      	// Add data labels
      	barChart.append("g")
      			.selectAll("text")
      			.data(allArr)
      			.attr("class","bar")
      			.enter()
      			.append("text")
      			.attr("x", function(d,i){
      				return xscale(d.country)+5;
      			 })
			 	.attr("y",function(d){
			 		return yscale(d.average)+40;
			 	})
				.text(function(d){return d.average.toFixed(2);})
			 	.attr("font-family", "sans-serif")
   				.attr("font-size", "10px")
   				.attr("fill", "white");
   		// Label y axis title
   		barChart.append("g")
   					.append("text")
      				.attr("transform", "rotate(-90)")
      				.attr("y", 0 - margin.left)
      				.attr("x",0 - (height / 2))
      				.attr("dy", "1em")
      				.style("text-anchor", "middle")
      				.text("Average Score of All Whiskey");  
      	// Label x axis title
      	barChart.append("g")
      			.append("text")             
      			.attr("transform",
            		"translate(" + (width/2) + " ," + 
                          (height + margin.top + 65) + ")")
     			.style("text-anchor", "middle")
      			.text("Country");

      	// Label world average line
      	barChart.append("g")
   				.append("text")
      			.attr("y", 0)
      			.attr("x",yscale(worldAverage) + 580)
      			.attr("dy", "1em")
      			.style("text-anchor", "middle")
   				.style("font-size", "12px")
      			.style("fill", "red")
   				.text("world average " + worldAverage.toFixed(2));

      /*
    ------------------------------------------------------------------
    ---------------------Next Chunk Below-----------------------------
    ------------------------------------------------------------------
      */
      /*
        Below is the code for bubble chart to count the type of whiskys
        in the database by couuntry
      */
      var arr = [{"class": "Select one class"},
                {"class": "SingleMalt"},
                {"class": "Bourbon"},
                {"class": "Rye"},
                {"class": "Scotch-Like"}]
                // Declaring the array for the selection in the drop down list

      var type_all = d3.nest().key(function(d){return d.class;})
                .rollup(function(d){return d.length;})
                .entries(arr);

      var types = d3.select("#type_dropdown");

      types.append("select")
                .selectAll("option")
                .data(type_all)
                .enter()
                .append("option")
                .attr("value",function(d){return d.key;})
                .text(function(d){return d.key});

      

      types.on("change", function(){

        var type_selection;

        var bubble_div = d3.select("#bubble");

          type_selection = d3.select(this)
                    .select("select")
                    .property("value");

          document.getElementById("bubble").style.display = "block";

          if(type_selection == "SingleMalt"){
              var bubble_div = d3.select("#bubble");
              bubble_div.html(null);
                      width = +bubble_div.attr("width"),
                      height = +bubble_div.attr("height");
                      // Define the div for the tooltip

                      var div = d3.select("body").append("div")   
                      .attr("class", "tooltip")               
                      .style("opacity", 0);


                      bubble_div.append("text")
                      .attr("x", 200)   
                      .attr("y", -10 )
                      .attr("dy", "3.5em" )
                      .attr("text-anchor", "start")  
                      .style("font-size", "28px")  
                      .style("font-weight", "bold")
                      .text("SingleMalt")

                      var pack = d3.pack()
                      .size([width-150, height])
                      .padding(1.5);


                      var color = d3.scaleOrdinal()
                        .domain(single_data.map(function(d){ return d.country;}))
                        .range(['#fbb4ae','#b3cde3','#ccebc5','#decbe4','#fed9a6',
                            '#ffe9a8','#b9bfe3','#fddaec','#cccccc','#ff9900',"#109618", "#990099", "#0099c6", "#dd4477", "#66aa00"]);

                      var root = d3.hierarchy({children: single_data})
                        .sum(function(d) { return d.count; })


                      var node = bubble_div.selectAll(".node")
                        .data(pack(root).leaves())
                        .enter().append("g")
                        .attr("class", "node")
                        .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });


                        node.append("circle")
                        .attr("id", function(d) { return d.id; })
                        .attr("r", function(d) { return d.r; })
                        .style("fill", function(d) { return color(d.data.country); })
                        .on("mouseover", function(d) {        
                            div.transition()        
                            .duration(200)        
                            .style("opacity", .9);    

                            var duration = 300;

                            single_data.forEach(function(d, i) {
                                node.transition().duration(duration).delay(i * duration)
                                .attr("r", d.count);
                            });

                            div.data(single_data)
                            .html(d.data.country + ": <br>"+ "total: " + d.data.count)    
                            .style("left", (d3.event.pageX) + "px")       
                            .style("top", (d3.event.pageY-28) + "px");  
                        })                    
                        .on("mouseout", function(d) {       
                            div.transition()        
                            .duration(500)        
                            .style("opacity", 0); 
                        });


                        node.data(single_data)
                        .append("text")
                        .attr("dy", ".2em")
                        .style("text-anchor", "middle")
                        .text(function(d) {
                            return d.country.substring(0, d.r/5);
                        })
                        .attr("font-family", "sans-serif")
                        .attr("font-size", function(d){
                            return d.r/3.5;
                        })
                        .attr("fill", "white");


                        var legend = bubble_div.selectAll(".legend")
                        .data(single_data).enter()
                        .append("g")
                        .attr("class","legend")
                        .attr("transform", "translate(" + 500 + "," + 120+ ")");


                        legend.append("rect")
                        .data(single_data)
                        .attr("x", 0) 
                        .attr("y", function(d, i) { return 20 * i; })
                        .attr("width", 15)
                        .attr("height", 15)
                        .style("fill", function(d) { return color(d.country)});

                        legend.append("text")
                        .data(single_data)
                        .attr("x", 25) 
                        .attr("text-anchor", "start")
                        .attr("dy", "1em") 
                        .attr("y", function(d, i) { return 20 * i; })
                        .text(function(d) {return d.country;})
                        .attr("font-size", "12px"); 

                        legend.append("text")
                        .attr("x",31) 
                        .attr("dy", "-.2em")
                        .attr("y",-10)
                        .text("Country")
                        .attr("font-size", "17px"); 

          } 
          if(type_selection == "Bourbon"){

              // Define the div for the tooltip

                  var bubble_div = d3.select("#bubble");
                  bubble_div.html(null);

                  width = +bubble_div.attr("width"),
                  height = +bubble_div.attr("height");
                  // Define the div for the tooltip

                  var div = d3.select("body").append("div")   
                  .attr("class", "tooltip")               
                  .style("opacity", 0);

                  bubble_div.append("text")
                  .attr("x", 200)   
                  .attr("y", -10 )
                  .attr("dy", "3.5em" )
                  .attr("text-anchor", "start")  
                  .style("font-size", "28px")  
                  .style("font-weight", "bold")
                  .text("Bourbon")

                  var pack = d3.pack()
                      .size([width-150, height])
                      .padding(1.5);

                  var color = d3.scaleOrdinal()
                        .domain(bourbon_data.map(function(d){ return d.country;}))
                        .range(['#fbb4ae','#b3cde3','#ccebc5','#decbe4','#fed9a6',
                            '#ffe9a8','#b9bfe3','#fddaec','#cccccc','#ff9900',"#109618", "#990099", "#0099c6", "#dd4477", "#66aa00"]);

                      var root = d3.hierarchy({children: bourbon_data})
                        .sum(function(d) { return d.count; })


                      var node = bubble_div.selectAll(".node")
                        .data(pack(root).leaves())
                        .enter().append("g")
                        .attr("class", "node")
                        .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });


                        node.append("circle")
                        .attr("id", function(d) { return d.id; })
                        .attr("r", function(d) { return d.r; })
                        .style("fill", function(d) { return color(d.data.country); })
                        .on("mouseover", function(d) {        
                            div.transition()        
                            .duration(200)        
                            .style("opacity", .9);    

                            var duration = 300;

                            bourbon_data.forEach(function(d, i) {
                                node.transition().duration(duration).delay(i * duration)
                                .attr("r", d.count);
                            });

                            div.data(single_data)
                            .html(d.data.country + ": <br>"+ "total: " + d.data.count)    
                            .style("left", (d3.event.pageX) + "px")       
                            .style("top", (d3.event.pageY-28) + "px");  
                        })                    
                        .on("mouseout", function(d) {       
                            div.transition()        
                            .duration(500)        
                            .style("opacity", 0); 
                        });


                        node.data(bourbon_data)
                        .append("text")
                        .attr("dy", ".2em")
                        .style("text-anchor", "middle")
                        .text(function(d) {
                            return d.country.substring(0, d.r/5);
                        })
                        .attr("font-family", "sans-serif")
                        .attr("font-size", function(d){
                            return d.r/3.5;
                        })
                        .attr("fill", "white");


                        var legend = bubble_div.selectAll(".legend")
                        .data(bourbon_data).enter()
                        .append("g")
                        .attr("class","legend")
                        .attr("transform", "translate(" + 500 + "," + 120+ ")");


                        legend.append("rect")
                        .data(bourbon_data)
                        .attr("x", 0) 
                        .attr("y", function(d, i) { return 20 * i; })
                        .attr("width", 15)
                        .attr("height", 15)
                        .style("fill", function(d) { return color(d.country)});

                        legend.append("text")
                        .data(bourbon_data)
                        .attr("x", 25) 
                        .attr("text-anchor", "start")
                        .attr("dy", "1em") 
                        .attr("y", function(d, i) { return 20 * i; })
                        .text(function(d) {return d.country;})
                        .attr("font-size", "12px"); 

                        legend.append("text")
                        .attr("x",31) 
                        .attr("dy", "-.2em")
                        .attr("y",-10)
                        .text("Country")
                        .attr("font-size", "17px"); 

            }
            if(type_selection == "Rye"){
              var bubble_div = d3.select("#bubble");
              bubble_div.html(null);
                      width = +bubble_div.attr("width"),
                      height = +bubble_div.attr("height");
                      // Define the div for the tooltip

                      var div = d3.select("body").append("div")   
                      .attr("class", "tooltip")               
                      .style("opacity", 0);


                      bubble_div.append("text")
                      .attr("x", 200)   
                      .attr("y", -10 )
                      .attr("dy", "3.5em" )
                      .attr("text-anchor", "start")  
                      .style("font-size", "28px")  
                      .style("font-weight", "bold")
                      .text("Rye Whiskey")

                      var pack = d3.pack()
                      .size([width-150, height])
                      .padding(1.5);


                      var color = d3.scaleOrdinal()
                        .domain(rye_data.map(function(d){ return d.country;}))
                        .range(['#fbb4ae','#b3cde3','#ccebc5','#decbe4','#fed9a6',
                            '#ffe9a8','#b9bfe3','#fddaec','#cccccc','#ff9900',"#109618", "#990099", "#0099c6", "#dd4477", "#66aa00"]);

                      var root = d3.hierarchy({children: rye_data})
                        .sum(function(d) { return d.count; })


                      var node = bubble_div.selectAll(".node")
                        .data(pack(root).leaves())
                        .enter().append("g")
                        .attr("class", "node")
                        .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });


                        node.append("circle")
                        .attr("id", function(d) { return d.id; })
                        .attr("r", function(d) { return d.r; })
                        .style("fill", function(d) { return color(d.data.country); })
                        .on("mouseover", function(d) {        
                            div.transition()        
                            .duration(200)        
                            .style("opacity", .9);    

                            var duration = 300;

                            rye_data.forEach(function(d, i) {
                                node.transition().duration(duration).delay(i * duration)
                                .attr("r", d.count);
                            });

                            div.data(rye_data)
                            .html(d.data.country + ": <br>"+ "total: " + d.data.count)    
                            .style("left", (d3.event.pageX) + "px")       
                            .style("top", (d3.event.pageY-28) + "px");  
                        })                    
                        .on("mouseout", function(d) {       
                            div.transition()        
                            .duration(500)        
                            .style("opacity", 0); 
                        });


                        node.data(rye_data)
                        .append("text")
                        .attr("dy", ".2em")
                        .style("text-anchor", "middle")
                        .text(function(d) {
                            return d.country.substring(0, d.r/5);
                        })
                        .attr("font-family", "sans-serif")
                        .attr("font-size", function(d){
                            return d.r/3.5;
                        })
                        .attr("fill", "white");


                        var legend = bubble_div.selectAll(".legend")
                        .data(rye_data).enter()
                        .append("g")
                        .attr("class","legend")
                        .attr("transform", "translate(" + 500 + "," + 120+ ")");


                        legend.append("rect")
                        .data(rye_data)
                        .attr("x", 0) 
                        .attr("y", function(d, i) { return 20 * i; })
                        .attr("width", 15)
                        .attr("height", 15)
                        .style("fill", function(d) { return color(d.country)});

                        legend.append("text")
                        .data(rye_data)
                        .attr("x", 25) 
                        .attr("text-anchor", "start")
                        .attr("dy", "1em") 
                        .attr("y", function(d, i) { return 20 * i; })
                        .text(function(d) {return d.country;})
                        .attr("font-size", "12px"); 

                        legend.append("text")
                        .attr("x",31) 
                        .attr("dy", "-.2em")
                        .attr("y",-10)
                        .text("Country")
                        .attr("font-size", "17px"); 

          } 
          if(type_selection == "Scotch-Like"){
              var bubble_div = d3.select("#bubble");
              bubble_div.html(null);
                      width = +bubble_div.attr("width"),
                      height = +bubble_div.attr("height");
                      // Define the div for the tooltip

                      var div = d3.select("body").append("div")   
                      .attr("class", "tooltip")               
                      .style("opacity", 0);


                      bubble_div.append("text")
                      .attr("x", 200)   
                      .attr("y", -10 )
                      .attr("dy", "3.5em" )
                      .attr("text-anchor", "start")  
                      .style("font-size", "28px")  
                      .style("font-weight", "bold")
                      .text("Scotch-Like Whisky")

                      var pack = d3.pack()
                      .size([width-150, height])
                      .padding(1.5);


                      var color = d3.scaleOrdinal()
                        .domain(scotch_data.map(function(d){ return d.country;}))
                        .range(['#fbb4ae','#b3cde3','#ccebc5','#decbe4','#fed9a6',
                            '#ffe9a8','#b9bfe3','#fddaec','#cccccc','#ff9900',"#109618", "#990099", "#0099c6", "#dd4477", "#66aa00"]);

                      var root = d3.hierarchy({children: scotch_data})
                        .sum(function(d) { return d.count; })


                      var node = bubble_div.selectAll(".node")
                        .data(pack(root).leaves())
                        .enter().append("g")
                        .attr("class", "node")
                        .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });


                        node.append("circle")
                        .attr("id", function(d) { return d.id; })
                        .attr("r", function(d) { return d.r; })
                        .style("fill", function(d) { return color(d.data.country); })
                        .on("mouseover", function(d) {        
                            div.transition()        
                            .duration(200)        
                            .style("opacity", .9);    

                            var duration = 300;

                            scotch_data.forEach(function(d, i) {
                                node.transition().duration(duration).delay(i * duration)
                                .attr("r", d.count);
                            });

                            div.data(scotch_data)
                            .html(d.data.country + ": <br>"+ "total: " + d.data.count)    
                            .style("left", (d3.event.pageX) + "px")       
                            .style("top", (d3.event.pageY-28) + "px");  
                        })                    
                        .on("mouseout", function(d) {       
                            div.transition()        
                            .duration(500)        
                            .style("opacity", 0); 
                        });


                        node.data(scotch_data)
                        .append("text")
                        .attr("dy", ".2em")
                        .style("text-anchor", "middle")
                        .text(function(d) {
                            return d.country.substring(0, d.r/5);
                        })
                        .attr("font-family", "sans-serif")
                        .attr("font-size", function(d){
                            return d.r/3.5;
                        })
                        .attr("fill", "white");


                        var legend = bubble_div.selectAll(".legend")
                        .data(scotch_data).enter()
                        .append("g")
                        .attr("class","legend")
                        .attr("transform", "translate(" + 500 + "," + 120+ ")");


                        legend.append("rect")
                        .data(scotch_data)
                        .attr("x", 0) 
                        .attr("y", function(d, i) { return 20 * i; })
                        .attr("width", 15)
                        .attr("height", 15)
                        .style("fill", function(d) { return color(d.country)});

                        legend.append("text")
                        .data(scotch_data)
                        .attr("x", 25) 
                        .attr("text-anchor", "start")
                        .attr("dy", "1em") 
                        .attr("y", function(d, i) { return 20 * i; })
                        .text(function(d) {return d.country;})
                        .attr("font-size", "12px"); 

                        legend.append("text")
                        .attr("x",31) 
                        .attr("dy", "-.2em")
                        .attr("y",-10)
                        .text("Country")
                        .attr("font-size", "17px"); 

          } 

      });


      /*
		------------------------------------------------------------------
		---------------------Next Chunk Below-----------------------------
		------------------------------------------------------------------
      */

      /*
		Below is the code for suggestion and interaction
		Using <div> with id="dropdown" and "suggestion"

		For id="dropdown" is the dropdown list for user to choose a country

		For id="suggestion", after the user have choose a country and a character, the
		code will generate a table of list of suggested whisky based on country and
		character chose by user. The default country is "Scotland". When user choose a
		character without clicking country, the code will generate the result based on
		Scotland and the corresponding character.
      */

      
        var col = ["whisky","score","cost","cluster","class","country","type"];
        // Declare table header

        var w_suggestion = 1200,
            h_suggestion = 800;
        // Set up the table on #suggestion
        var suggestion = d3.select("#suggestion")
                   .attr("width",w_suggestion)
                   .attr("height",h_suggestion);

        // Function to generate a table after user has chosen country and character
        var tabulate = function(data,columns){
          var table = suggestion.append("table");
          var thead = table.append("thead"); // Declare header
          var tbody = table.append("tbody"); // Declare table cells

          var sortAscending = true; // For sorting the table
          // This variable is not used until clicking on header 

          var headers = thead.append("tr")
                             .selectAll("th")
                             .data(columns)
                             .enter()
                             .append("th")
                             .text(function(d){return d;})
                             .on("click",function(d){
                                headers.attr("class","header");

                                if(sortAscending){
                                  rows.sort(function(a,b){
                                    return d3.ascending(a[d],b[d]); 
                                  });
                                  sortAscending = false;
                                  this.className = "aes";
                                }
                                else{
                                  rows.sort(function(a,b){
                                    return d3.descending(a[d],b[d]); 
                                  });
                                  sortAscending = true;
                                  this.className= "des";
                                }
                             });
          // Build the header

          var rows = tbody.selectAll("tr")
                  .data(data)
                  .enter()
                  .append("tr");
          // Declare the rows

          // Fill in the cells
          var cells = rows.selectAll("td")
                  .data(function(row){
                    return columns.map(function(col){
                      if(col == "cost"){
                        var temp = row[col];
                        var str;
                        if (temp == 1)
                          str = "$";
                        else if (temp == 2)
                          str = "$$";
                        else if (temp == 3)
                          str = "$$$";
                        else if (temp == 4)
                          str = "$$$$";
                        else if (temp == 5)
                          str = "$$$$";
                        else if (temp == 6)
                          str = "$$$$+";

                        // Return price in to dollar sign instead of integers
                        return {column: col, value: str};
                      }
                      else if (col == "cluster"){
                        // Return cluster to readable characters for users
                      	var temp = row[col];
                      	var str;
                      	if (temp == "A")
                      		str = "Fruity, Honey, Spicy";
                      	else if (temp == "B")
                      		str = "Fruity, Floral, Malty";
                      	else if (temp == "C")
                      		str = "Fruity, Floral, Nutty";
                      	else if (temp == "E")
                      		str = "Fruity, Honey, Malty, Winey";
                      	else if (temp == "F")
                      		str = "Fruity, Spicy, Smoky";
                      	else if (temp == "G")
                      		str = "Honey, Floral, Fruity, Spicy";
                      	else if (temp == "H")
                      		str = "Fruity, Malty, Floral";
                      	else if (temp == "I")
                      		str = "Fruity, Nutty, Spicy, Smoky";
                      	else if (temp == "J")
                      		str = "Fruity, Spicy, malty, Very Smoky";
                      	else if (temp == "R0")
                      		str = "No rye grain";
                      	else if (temp == "R1")
                      		str = "Low rye";
                      	else if (temp == "R2")
                      		str = "Standard rye";
                      	else if (temp == "R3")
                      		str = "High rye";
                      	else if (temp == "R4")
                      		str = "Straight rye";
                      	else
                      		str = temp;
                        
                        return {column: col, value: str};
                      }
                      else{
                        return {column: col, value: row[col]};
                      }
                    })
                  })
                  .enter()
                  .append("td")
                  .attr("data-th", function(d){return d.column;})
                  .text(function(d){return d.value;});

          return table;
        } // End function tablate


        /* 
        	On the column Cluster, from whisky_clear.csv, consists more than 1 character.
        	filteredList is the function to match to cluster
        */
        var filteredList = function(dataset,country,choice,budget){
        	var filtered;

        	// Below if function is for characters
        	if (choice == "Fruity")
        		filtered =  dataset.filter(function(d){
              					return (d.country == country && 
              							d.cluster != "R0" &&
              							d.cluster != "R1" &&
              							d.cluster != "R2" &&
              							d.cluster != "R3" &&
              							d.cluster != "R4" &&
              							d.cluster != "N")
              				});
        	else if (choice == "Honey")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && 
        									(
        										d.cluster == "A" ||
        										d.cluster == "E" ||
        										d.cluster == "G"
        									)
        								);
        					});
        	else if (choice == "Spicy")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && 
        									(
        										d.cluster == "A" ||
        										d.cluster == "F" ||
        										d.cluster == "G" ||
        										d.cluster == "I" ||
        										d.cluster == "J"
        									)
        								);
        					});
        	else if (choice == "Floral")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && 
        									(
        										d.cluster == "B" ||
        										d.cluster == "C" ||
        										d.cluster == "G" ||
        										d.cluster == "H"
        									)
        								);
        					});
        	else if (choice == "Floral")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && 
        									(
        										d.cluster == "B" ||
        										d.cluster == "C" ||
        										d.cluster == "G" ||
        										d.cluster == "H"
        									)
        								);
        					});
        	else if (choice == "Malty")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && 
        									(
        										d.cluster == "B" ||
        										d.cluster == "E" ||
        										d.cluster == "H" ||
        										d.cluster == "J"
        									)
        								);
        					});
        	else if (choice == "Nutty")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && 
        									(	
        										d.cluster == "C" ||
        										d.cluster == "I" 
        									)
        								);
        					});
        	else if (choice == "Winey")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && d.cluster == "E");
        					});
        	else if (choice == "Smoky")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && 
        									(	
        										d.cluster == "F" ||
        										d.cluster == "I" 
        									)
        								);
        					});
        	else if (choice == "Very Smoky")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && d.cluster == "J");
        					});
        	else if (choice == "R0")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && d.cluster == "R0");
        					});
        	else if (choice == "R1")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && d.cluster == "R1");
        					});
        	else if (choice == "R2")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && d.cluster == "R2");
        					});
        	else if (choice == "R3")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && d.cluster == "R3");
        					});
        	else if (choice == "R4")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && d.cluster == "R4");
        					});
        	// Above functions are for characters
        	else if (choice == "N")
        		filtered = dataset.filter(function(d){
        						return (d.country == country && d.cluster == "N");
        					});

        	if(budget != "all")
        		filtered = filtered.filter(function(d){
        						return (d.cost == budget);
        					});
        	return filtered;

        } // End function filteredList
          
        // To obtain the selection on the dropdown list
        var dropdown_option = d3.nest().key(function(d){return d.country;})
                    			.rollup(function(d){return d.length;})
                    			.entries(whisky_data); 

        var selection = d3.select("#dropdown");

        selection.append("select")
                 .selectAll("option")
                 .data(dropdown_option)
                 .enter()
                 .append("option")
                 .attr("value",function(d){return d.key;})
                 .text(function(d){return d.key;});

        // Interaction for user to select country and flavor to filter
        // Default selection to Scotland
        var selectedCountry = "Scotland";

        var selectedFlavor; // Declare selectedFlavor to store character

        // Event when the drop down list is selected with country
        selection.on("change",function(){

            selectedCountry = d3.select(this)
                      			.select("select")
                      			.property("value");

            if(selectedCountry == "USA"){
            	document.getElementById("rye_contain").style.display = "block";
            }
            else{
            	document.getElementById("rye_contain").style.display = "none";
            }

            
        }); // End event on selecting country

        d3.select("#character_buttons")
          .selectAll(".flavor")
          .on("click",function(d){
            selectedFlavor = d3.select(this).attr("id");

            // To filter the list based on selected country and flavor
            var whisky_list = filteredList(whisky_data,selectedCountry,selectedFlavor,"all");
            // To remove the table if there is a table existed in id="suggestion"
            d3.selectAll("#suggestion").selectAll("table").remove();
            d3.selectAll("#suggestion").selectAll("p").remove();
            //Display budget panel
            document.getElementById("money").style.display = "block";
            document.getElementById("suggestion").style.display = "block";
            // To generate a table and rows
            var table = tabulate(whisky_list,col);
            // To add a table head
            table.selectAll("thead th")
             	   .text(function(col){return col.charAt(0).toUpperCase()+col.substr(1);});
        }); // End event on selecting character

        // Only pop out if USA is chosen
        d3.select("#rye_contain")
          .selectAll(".rye")
          .on("click",function(d){
            selectedFlavor = d3.select(this).attr("id");

            // To filter the list based on selected country and flavor
            var whisky_list = filteredList(whisky_data,selectedCountry,selectedFlavor,"all");
            // To remove the table if there is a table existed in id="suggestion"
            d3.selectAll("#suggestion").selectAll("table").remove();
            d3.selectAll("#suggestion").selectAll("p").remove();
            //Display budget panel
            document.getElementById("money").style.display = "block";
            document.getElementById("suggestion").style.display = "block";
            // To generate a table and rows
            var table = tabulate(whisky_list,col);
            // To add a table head
            table.selectAll("thead th")
             	   .text(function(col){return col.charAt(0).toUpperCase()+col.substr(1);});
        }); // End event on selecting character

        d3.select("#money")
          .selectAll(".bud")
          .on("click",function(d){
          		var budget = d3.select(this).attr("id");
            	var whisky_list = filteredList(whisky_data,selectedCountry,selectedFlavor,budget);

          		d3.selectAll("#suggestion").selectAll("table").remove();
            	d3.selectAll("#suggestion").selectAll("p").remove();
          		var table = tabulate(whisky_list,col);
            	// To add a table head
            	table.selectAll("thead th")
             	     .text(function(col){return col.charAt(0).toUpperCase()+col.substr(1);});

          });

          
          // Above is the code for suggestion and interaction
      	  /*
			------------------------------------------------------------------
			---------------------Next Chunk Below-----------------------------
			------------------------------------------------------------------
      	  */

		} // End function
  </script>

</body>
</html>
